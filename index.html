<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ú–∏—Å—Å–∏—è</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --dark: #2d3436;
            --light: #dfe6e9;
            --accent: #ffeaa7;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            user-select: none;
        }

        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        header {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        #timer-bar-container {
            width: 100%;
            height: 8px;
            background: #444;
            margin-top: 0;
        }

        #timer-bar {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #00b894, #ffeaa7, #ff7675);
            transition: width 1s linear;
        }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        #game-container {
            margin: 20px auto;
            display: grid;
            gap: 10px;
            perspective: 1000px;
            max-width: 95vw;
            padding: 10px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background-color: transparent;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            aspect-ratio: 1 / 1;
            border-radius: 10px;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .card-front {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            font-size: 1.5rem;
            color: rgba(255,255,255,0.5);
            border: 2px solid rgba(255,255,255,0.1);
        }

        .card-back {
            background: white;
            transform: rotateY(180deg);
            border: 3px solid var(--accent);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ—Ç–∫–∏ */
        .grid-2x2 { grid-template-columns: repeat(2, 80px); }
        .grid-2x3 { grid-template-columns: repeat(3, 80px); }
        .grid-3x4 { grid-template-columns: repeat(3, 70px); }
        .grid-4x4 { grid-template-columns: repeat(4, 65px); }
        .grid-4x5 { grid-template-columns: repeat(4, 60px); }

        @media (min-width: 600px) {
            .grid-2x2 { grid-template-columns: repeat(2, 120px); }
            .grid-2x3 { grid-template-columns: repeat(3, 120px); }
            .grid-3x4 { grid-template-columns: repeat(4, 100px); }
            .grid-4x4 { grid-template-columns: repeat(4, 100px); }
            .grid-4x5 { grid-template-columns: repeat(5, 90px); }
            
            .card-face { font-size: 3.5rem; }
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
            text-align: center;
            padding: 20px;
        }

        .modal h2 {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 10px;
        }

        .modal p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 0 15px var(--primary);
        }

        button:hover {
            transform: scale(1.05);
            background: var(--secondary);
        }

        /* –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤ */
        #trophy-room {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 15px;
            margin-top: auto;
            margin-bottom: 20px;
            width: 90%;
            max-width: 600px;
            text-align: center;
        }

        #trophy-grid {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            min-height: 50px;
        }

        .trophy {
            font-size: 2rem;
            background: rgba(255,255,255,0.1);
            padding: 5px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        
        .gift-reveal {
            font-size: 5rem;
            margin: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

    </style>
</head>
<body>

    <div id="timer-bar-container">
        <div id="timer-bar"></div>
    </div>

    <header>
        <div class="stat-box">–£—Ä–æ–≤–µ–Ω—å: <span id="level-display">1</span>/10</div>
        <div class="stat-box">–û—á–∫–∏: <span id="score-display">0</span></div>
    </header>

    <div id="game-container">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
    </div>

    <div id="trophy-room">
        <h3>üèÜ –¢–≤–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –Ω–∞–≥—Ä–∞–¥</h3>
        <div id="trophy-grid">–ü–æ–∫–∞ –ø—É—Å—Ç–æ... –ü—Ä–æ–π–¥–∏ —É—Ä–æ–≤–µ–Ω—å!</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ä—Ç–∞ -->
    <div id="start-screen" class="modal" style="display: flex;">
        <h1>üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ú–∏—Å—Å–∏—è</h1>
        <p>–ù–∞–π–¥–∏ –ø–∞—Ä—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –≤—Ä–µ–º—è!</p>
        <p>–°–æ–±–µ—Ä–∏ 10 –ø–æ–¥–∞—Ä–∫–æ–≤!</p>
        <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã —É—Ä–æ–≤–Ω—è -->
    <div id="level-complete-screen" class="modal">
        <h2>–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</h2>
        <div class="gift-reveal" id="current-gift">üéÅ</div>
        <p>–¢—ã –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç!</p>
        <p>–ë–æ–Ω—É—Å –∑–∞ –≤—Ä–µ–º—è: +<span id="time-bonus">0</span></p>
        <button onclick="nextLevel()">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ–∏–≥—Ä—ã—à–∞ -->
    <div id="game-over-screen" class="modal">
        <h2>–í—Ä–µ–º—è –≤—ã—à–ª–æ! üò¢</h2>
        <p>–ù–µ —Å–¥–∞–≤–∞–π—Å—è, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!</p>
        <button onclick="restartLevel()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ñ–∏–Ω–∞–ª–∞ -->
    <div id="victory-screen" class="modal">
        <h2>üéâ –ü–û–ë–ï–î–ê! üéâ</h2>
        <p>–¢—ã –ø—Ä–æ—à–µ–ª –≤—Å–µ 10 —É—Ä–æ–≤–Ω–µ–π!</p>
        <p>–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–∞–ø–∏—Ç–∞–Ω!</p>
        <p>–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: <span id="final-score">0</span></p>
        <div id="all-trophies" style="font-size: 2rem; margin: 20px;"></div>
        <button onclick="location.reload()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>

    <script>
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
        const icons = ['üëΩ', 'üöÄ', 'ü™ê', '‚òÑÔ∏è', 'üõ∞Ô∏è', 'üëæ', 'üõ∏', 'üåô', '‚≠ê', 'ü§ñ', 'üî≠', 'üåç', '‚òÄÔ∏è', 'üîã', 'üíé'];
        const gifts = ['üß¢', 'üé∏', 'üõπ', 'üçî', 'üéÆ', 'üèÜ', 'üê∂', 'üì±', 'üö≤', 'üëë']; // 10 –ø–æ–¥–∞—Ä–∫–æ–≤

        const levelsConfig = [
            { pairs: 2, time: 10, grid: 'grid-2x2' }, // –£—Ä–æ–≤–µ–Ω—å 1: 4 –∫–∞—Ä—Ç—ã
            { pairs: 3, time: 15, grid: 'grid-2x3' }, // –£—Ä–æ–≤–µ–Ω—å 2: 6 –∫–∞—Ä—Ç
            { pairs: 4, time: 20, grid: 'grid-3x4' }, // –£—Ä–æ–≤–µ–Ω—å 3: 8 –∫–∞—Ä—Ç (—Å–µ—Ç–∫–∞ –Ω–µ—Ä–æ–≤–Ω–∞—è, css –ø–æ–ø—Ä–∞–≤–∏—Ç)
            { pairs: 6, time: 30, grid: 'grid-3x4' }, // –£—Ä–æ–≤–µ–Ω—å 4: 12 –∫–∞—Ä—Ç
            { pairs: 6, time: 25, grid: 'grid-3x4' }, // –£—Ä–æ–≤–µ–Ω—å 5: 12 –∫–∞—Ä—Ç, –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏
            { pairs: 8, time: 40, grid: 'grid-4x4' }, // –£—Ä–æ–≤–µ–Ω—å 6: 16 –∫–∞—Ä—Ç
            { pairs: 8, time: 35, grid: 'grid-4x4' }, // –£—Ä–æ–≤–µ–Ω—å 7: 16 –∫–∞—Ä—Ç, –±—ã—Å—Ç—Ä–µ–µ
            { pairs: 10, time: 50, grid: 'grid-4x5' }, // –£—Ä–æ–≤–µ–Ω—å 8: 20 –∫–∞—Ä—Ç
            { pairs: 10, time: 45, grid: 'grid-4x5' }, // –£—Ä–æ–≤–µ–Ω—å 9: 20 –∫–∞—Ä—Ç, –±—ã—Å—Ç—Ä–µ–µ
            { pairs: 12, time: 50, grid: 'grid-4x5' } // –£—Ä–æ–≤–µ–Ω—å 10: –•–∞—Ä–¥–∫–æ—Ä (–µ—Å–ª–∏ –≤–ª–µ–∑–µ—Ç, –∏–Ω–∞—á–µ CSS –æ–±—Ä–µ–∂–µ—Ç)
            // –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö 4x5 —ç—Ç–æ –º–∞–∫—Å–∏–º—É–º –∫–æ–º—Ñ–æ—Ä—Ç–∞, –ø–æ—ç—Ç–æ–º—É —É—Ä–æ–≤–Ω–∏ 8-10 –º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º—è
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let currentLevel = 0;
        let score = 0;
        let timer;
        let timeLeft;
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchesFound = 0;
        let gameActive = false;
        const collectedGifts = [];

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const gameContainer = document.getElementById('game-container');
        const levelDisplay = document.getElementById('level-display');
        const scoreDisplay = document.getElementById('score-display');
        const timerBar = document.getElementById('timer-bar');
        const trophyGrid = document.getElementById('trophy-grid');

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            loadLevel();
        }

        function loadLevel() {
            const config = levelsConfig[currentLevel];
            levelDisplay.innerText = currentLevel + 1;
            matchesFound = 0;
            gameActive = true;
            
            // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
            timeLeft = config.time;
            updateTimerVisual();
            startTimer();

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
            gameContainer.innerHTML = '';
            gameContainer.className = config.grid; // –ü—Ä–∏–º–µ–Ω—è–µ–º CSS –∫–ª–∞—Å—Å –¥–ª—è —Å–µ—Ç–∫–∏

            // –í—ã–±–∏—Ä–∞–µ–º –∏–∫–æ–Ω–∫–∏ –¥–ª—è —É—Ä–æ–≤–Ω—è
            let levelIcons = icons.sort(() => 0.5 - Math.random()).slice(0, config.pairs);
            // –î—É–±–ª–∏—Ä—É–µ–º –∏—Ö
            let cards = [...levelIcons, ...levelIcons];
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º
            cards.sort(() => 0.5 - Math.random());

            cards.forEach(icon => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.icon = icon;
                card.innerHTML = `
                    <div class="card-face card-front">?</div>
                    <div class="card-face card-back">${icon}</div>
                `;
                card.addEventListener('click', flipCard);
                gameContainer.appendChild(card);
            });
        }

        function startTimer() {
            clearInterval(timer);
            const totalTime = timeLeft;
            timer = setInterval(() => {
                if (!gameActive) return;
                timeLeft--;
                updateTimerVisual(totalTime);

                if (timeLeft <= 0) {
                    gameOver();
                }
            }, 1000);
        }

        function updateTimerVisual(total) {
            if (!total) total = levelsConfig[currentLevel].time;
            const percentage = (timeLeft / total) * 100;
            timerBar.style.width = percentage + '%';
            
            // –°–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞ –ø–æ–ª–æ—Å–∫–∏
            if (percentage > 60) timerBar.style.background = '#00b894';
            else if (percentage > 30) timerBar.style.background = '#ffeaa7';
            else timerBar.style.background = '#ff7675';
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('flipped');

            if (!hasFlippedCard) {
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.icon === secondCard.dataset.icon;

            if (isMatch) {
                disableCards();
                matchesFound++;
                score += 10;
                scoreDisplay.innerText = score;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ
                if (matchesFound === levelsConfig[currentLevel].pairs) {
                    levelComplete();
                }
            } else {
                unflipCards();
            }
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            resetBoard();
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        function levelComplete() {
            clearInterval(timer);
            gameActive = false;
            
            // –ë–æ–Ω—É—Å –∑–∞ –≤—Ä–µ–º—è
            const bonus = timeLeft * 5;
            score += bonus;
            scoreDisplay.innerText = score;
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
            const gift = gifts[currentLevel];
            collectedGifts.push(gift);
            updateTrophies();

            // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const modal = document.getElementById('level-complete-screen');
            document.getElementById('time-bonus').innerText = bonus;
            document.getElementById('current-gift').innerText = gift;
            
            setTimeout(() => {
                modal.style.display = 'flex';
            }, 500);
        }

        function updateTrophies() {
            trophyGrid.innerHTML = '';
            collectedGifts.forEach(gift => {
                const div = document.createElement('div');
                div.className = 'trophy';
                div.innerText = gift;
                trophyGrid.appendChild(div);
            });
        }

        function nextLevel() {
            document.getElementById('level-complete-screen').style.display = 'none';
            currentLevel++;

            if (currentLevel >= 10) {
                victory();
            } else {
                loadLevel();
            }
        }

        function restartLevel() {
            document.getElementById('game-over-screen').style.display = 'none';
            score = Math.max(0, score - 20); // –®—Ç—Ä–∞—Ñ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ
            scoreDisplay.innerText = score;
            loadLevel();
        }

        function gameOver() {
            clearInterval(timer);
            gameActive = false;
            document.getElementById('game-over-screen').style.display = 'flex';
        }

        function victory() {
            const victoryScreen = document.getElementById('victory-screen');
            document.getElementById('final-score').innerText = score;
            document.getElementById('all-trophies').innerText = collectedGifts.join(' ');
            victoryScreen.style.display = 'flex';
        }
    </script>
</body>
</html>
